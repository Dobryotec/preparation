<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Task 6</title>
  </head>
  <body>
    <h1>Task 6</h1>
    <p>
      Користувач задає кількість оцінок і натискає на кнопку «get table». В
      результаті формується таблиця з input, куди користувач вводить оцінки.
      Після цього натискає на кнопку “get sum” і знаходить середнє значення.
    </p>
    <script>
      function createInput(textLabel, id) {
        const div = document.createElement("div");

        const label = document.createElement("label");
        label.textContent = textLabel;

        const input = document.createElement("input");
        input.setAttribute("type", "number");
        input.setAttribute("value", "");
        input.setAttribute("id", id);

        label.append(input);

        div.append(label);
        document.body.append(div);
      }

      createInput("Quantity numbers", "inputFirst");

      function getQuantityInputs() {
        return document.getElementById("inputFirst").value;
      }

      function createButton(textBtn, id) {
        const div = document.createElement("div");

        const button = document.createElement("button");
        button.textContent = textBtn;
        button.setAttribute("type", "button");
        button.setAttribute("id", id);

        div.append(button);
        document.body.append(div);
      }

      createButton("Get table", "btnFirst");

      function getInputs() {
        const quantityInputs = getQuantityInputs();

        for (let i = 0; i < quantityInputs; i++) {
          const input = document.createElement("input");
          input.setAttribute("type", "number");
          input.setAttribute("value", "");
          input.setAttribute("id", "input" + (i + 2));

          document.body.append(input);
        }

        createButton("Get average", "btnSecond");

        document.getElementById("btnSecond").onclick = getAverage;
      }

      function getAverage() {
        const quantityInputs = getQuantityInputs();

        let total = 0;

        for (let i = 0; i < quantityInputs; i++) {
          const inputValue = parseInt(
            document.getElementById("input" + (i + 2)).value
          );

          total += inputValue;
        }

        const p = document.createElement("p");
        p.textContent = "average = " + total / quantityInputs;

        document.body.append(p);
      }

      window.onload = function () {
        document.getElementById("btnFirst").onclick = getInputs;
      };
    </script>
  </body>
</html>
